<app-header></app-header>
<div class="container">

  <header class="page-header">
    <h2>Work Items</h2>
    <!-- <button type="button" [routerLink]="['/add-workitem']"
            style="color: white;background-color:#ff7f32;border: none;border-radius: 5px;">
      <b>Add Workitem</b>
    </button> -->
  </header>

  <!-- Loading spinner -->
  <div class="loading" *ngIf="isLoading">
    <i class="fa fa-spinner fa-spin"></i> Loading...
  </div>

  <div class="table-container" *ngIf="!isLoading">
    <div class="tabs">
      <button [class.active]="activeTab === 'standard'" (click)="setTab('standard')">Standard</button>
      <button [class.active]="activeTab === 'unibouw'" (click)="setTab('unibouw')">Unibouw</button>
    </div>

    <div class="search-box">
      <input type="text" placeholder="Search..." [(ngModel)]="searchText" (input)="applyFilter()" />
    </div>

    <!-- No workitems message -->
    <div *ngIf="filteredItems.length === 0" class="no-data" style="text-align: center;">
      No WorkItems found.
    </div>

    <table class="styled-table" *ngIf="filteredItems.length > 0">
      <thead>
        <tr>
          <th>Code</th>
          <th>Workitem</th>
          <th>Description</th>
          <th *ngIf="isAdmin">Action</th>
        </tr>
      </thead>
      <tbody>
       <tr *ngFor="let item of pagedItems" [class.inactive]="!item.isActive">
  <td [class.inactive]="!item.isActive">{{ item.number }}</td>
  <td [class.inactive]="!item.isActive">{{ item.name }}</td>

  <!-- Editable Description -->
  <td>
  <input 
    type="text" 
    [(ngModel)]="item.description" 
    [readonly]="!item.isEditing || !item.isActive" 
    class="description-input"
  />
  <button 
    *ngIf="!item.isEditing" 
    (click)="item.isEditing = true"
          [disabled]="!item.isActive"

  >
    Edit
  </button>
  <button 
    *ngIf="item.isEditing" 
    (click)="saveDescription(item)"
  >
    Save
  </button>

  <div *ngIf="item.showSavedMsg" class="saved-msg">
    Description saved successfully!
  </div>
</td>


  <td *ngIf="isAdmin">
    <label class="switch">
      <input type="checkbox" [checked]="item.isActive" (change)="toggleIsActive(item)" />
      <span class="slider"></span>
    </label>
  </td>
</tr>
      </tbody>
    </table>


  <div class="pagination-wrapper">
 <div >
      
      <!-- Left: Records per page -->
      <div class="records-per-page">
        <select id="pageSize" [(ngModel)]="pageSize" (change)="onPageSizeChange()">
          <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
        </select>
         {{ paginationInfo }}
      </div>

      
</div>
<!-- Right: Pagination -->
      <div class="pagination-container">
        <button 
          class="page-btn" 
          [disabled]="currentPage === 1" 
          (click)="prevPage()">
          Previous
        </button>

        <!-- Page Numbers -->
        <button 
          class="page-btn" 
          *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="currentPage === (i + 1)"
          (click)="goToPage(i + 1)">
          {{ i + 1 }}
        </button>

        <button 
          class="page-btn" 
          [disabled]="currentPage === totalPages" 
          (click)="nextPage()">
          Next
        </button>
      </div>
  </div>
  </div>

</div>
<app-footer></app-footer>
